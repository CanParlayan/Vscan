import json
import time
import os


class ReportGenerator:
    def __init__(self, given_url):
        
        self.filename = f"report_{time.strftime('%Y%m%d-%H%M')}.json"
        self.url = given_url
        
        self.report_data = {
            "site_url": self.url,
            "timestamp": time.strftime('%Y%m%d-%H%M'),
            "audit_details": []
        }

    def __create_report(self):
        
        with open(self.filename, "w") as f:
            json.dump(self.report_data, f, indent=2)

    def write_to_report(self, details):

        self.report_data["audit_details"].append(details)
        
        os.makedirs('reports', exist_ok=True)
        
        with open(os.path.join('reports', self.filename), "w") as f:
            json.dump(self.report_data, f, indent=2)
